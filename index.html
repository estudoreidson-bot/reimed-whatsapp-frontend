<!doctype html><html lang="pt-BR"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Queimadas Telemedicina — Painel WhatsApp</title><style>body{font-family:Arial,sans-serif;margin:0;padding:0;background:#f7f7f7}header{background:#0a4ba1;color:#fff;padding:16px}main{max-width:880px;margin:24px auto;background:#fff;padding:24px;border-radius:12px}h1{margin:0 0 8px;font-size:22px}.card{border:1px solid #e5e5e5;padding:16px;border-radius:10px;margin-bottom:16px}label{display:block;font-weight:bold;margin-top:8px}input,textarea{width:100%;padding:10px;border:1px solid #ddd;border-radius:8px}button{padding:10px 16px;border:none;border-radius:8px;background:#0a4ba1;color:#fff;cursor:pointer}button:disabled{opacity:.6;cursor:not-allowed}.muted{color:#666;font-size:14px}.ok{color:#0a7a1f;font-weight:bold}.err{color:#c00;font-weight:bold}</style></head><body><header><h1>Queimadas Telemedicina — Painel WhatsApp</h1><div class="muted">Recepção → Médico → Validação do médico humano → PDF no chat</div></header><main><div class="card"><h2>Configuração</h2><p class="muted">Defina abaixo a URL do backend no Render.</p><label>Backend URL (ex.: https://reimed-whatsapp-backend.onrender.com)</label><input id="backendUrl" placeholder="https://..."></div><div class="card"><h2>Enviar receita validada (PDF) ao paciente</h2><label>Telefone do paciente (E.164, ex.: 5599999999999)</label><input id="to" placeholder="55DDDNÚMERO"><label>URL do PDF assinado</label><input id="pdfUrl" placeholder="https://.../Receita_Assinada.pdf"><label>Mensagem (opcional)</label><textarea id="message" rows="3">Sua receita validada está disponível. Segue o PDF.</textarea><div style="margin-top:12px;"><button id="sendBtn">Enviar PDF no WhatsApp</button></div><div id="result" style="margin-top:10px;"></div></div><div class="card"><h2>Status rápido</h2><button id="pingBtn">Testar conexão</button><div id="pingRes" class="muted"></div></div></main><script>const $=id=>document.getElementById(id);const save=()=>localStorage.setItem("backendUrl",$("backendUrl").value.trim());const load=()=>$("backendUrl").value=localStorage.getItem("backendUrl")||"";load();$("backendUrl").addEventListener("change",save);$("sendBtn").addEventListener("click",async()=>{const base=$("backendUrl").value.trim();const to=$("to").value.trim();const pdfUrl=$("pdfUrl").value.trim();const message=$("message").value.trim();$("sendBtn").disabled=true;$("result").innerHTML="";try{const res=await fetch(base+"/whatsapp/admin/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to,pdfUrl,message})});if(!res.ok)throw new Error("Falha HTTP "+res.status);const data=await res.json();if(data.ok)$("result").innerHTML='<span class="ok">Enviado com sucesso.</span>';else $("result").innerHTML='<span class="err">Erro: '+(data.error||"desconhecido")+"</span>"}catch(e){$("result").innerHTML='<span class="err">Erro ao enviar: '+e.message+"</span>"}finally{$("sendBtn").disabled=false}});$("pingBtn").addEventListener("click",async()=>{const base=$("backendUrl").value.trim();$("pingRes").textContent="Testando...";try{const res=await fetch(base+"/healthz");const data=await res.json();$("pingRes").textContent=data.ok?"OK":"Falha"}catch{$("pingRes").textContent="Falha"}});</script></body></html>